{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": ["null", "array"],
  "description": "An array of quality profiles that exist in the remote service along with any configuration properties that Recyclarr should use to modify that quality profile.",
  "items": {
    "type": "object",
    "additionalProperties": false,
    "anyOf": [{ "required": ["name"] }, { "required": ["trash_id"] }],
    "properties": {
      "trash_id": {
        "type": "string",
        "description": "The trash_id of a quality profile from the TRaSH Guides. When specified, the profile is managed via cache and supports rename tracking."
      },
      "name": {
        "type": "string",
        "description": "The name of the quality profile. For guide-backed profiles (with trash_id), this overrides the guide name. For user-defined profiles, this is the profile identity."
      },
      "reset_unmatched_scores": {
        "type": ["null", "object"],
        "description": "Settings related to resetting unmatched CF scores.",
        "additionalProperties": false,
        "required": ["enabled"],
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "If set to true, enables setting scores to 0 in quality profiles where either a CF was not mentioned in the trash_ids array or it was in that list but did not get a score (e.g. no score in guide)."
          },
          "except": {
            "type": ["null", "array"],
            "description": "An array of strings that match custom formats to exclude when resetting scores. Matching is case-insensitive.",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "score_set": {
        "type": "string",
        "description": "The set of scores to use for custom formats assigned to a profile.",
        "default": "default"
      },
      "upgrade": {
        "type": ["null", "object"],
        "additionalProperties": false,
        "required": ["allowed"],
        "properties": {
          "allowed": {
            "type": "boolean"
          },
          "until_quality": {
            "type": "string"
          },
          "until_score": {
            "type": "number"
          }
        }
      },
      "min_format_score": {
        "type": "number",
        "description": "The minimum custom format score required to download a release."
      },
      "min_upgrade_format_score": {
        "type": "number",
        "description": "The minimum custom format score required to upgrade an already-downloaded release."
      },
      "quality_sort": {
        "enum": ["bottom", "top"],
        "default": "top"
      },
      "qualities": {
        "type": ["null", "array"],
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": ["name"],
          "properties": {
            "name": {
              "type": "string"
            },
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "qualities": {
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
