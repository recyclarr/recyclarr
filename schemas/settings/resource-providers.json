{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/recyclarr/recyclarr/master/schemas/settings/resource-providers.json",
  "title": "Resource provider configuration",
  "oneOf": [
    { "$ref": "#/definitions/git_provider" },
    { "$ref": "#/definitions/local_provider" }
  ],
  "definitions": {
    "base_provider": {
      "type": "object",
      "required": ["name", "type"],
      "properties": {
        "name": {
          "type": "string",
          "title": "Unique identifier for this provider",
          "description": "Must be globally unique across all providers. Used for directory naming. May only contain letters, numbers, hyphens, and underscores.",
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "type": {
          "type": "string",
          "title": "Provider type indicating content structure",
          "enum": ["trash-guides", "config-templates", "custom-formats"]
        },
        "replace_default": {
          "type": "boolean",
          "title": "Replace implicit official provider for this type",
          "description": "When true, prevents injection of implicit official provider. Only one provider per type can have this set to true.",
          "default": false
        },
        "service": {
          "type": "string",
          "title": "Service this provider targets (required for custom-formats type)",
          "description": "Specifies which service (Radarr or Sonarr) these resources are for. Required when type is 'custom-formats'.",
          "enum": ["radarr", "sonarr"]
        }
      }
    },
    "git_provider": {
      "allOf": [
        { "$ref": "#/definitions/base_provider" },
        {
          "type": "object",
          "required": ["clone_url"],
          "additionalProperties": false,
          "properties": {
            "name": true,
            "type": true,
            "replace_default": true,
            "service": true,
            "clone_url": {
              "type": "string",
              "title": "Git clone URL for the repository",
              "format": "uri"
            },
            "reference": {
              "type": "string",
              "title": "Branch name, tag, or SHA1 commit hash to check out",
              "default": "master"
            },
            "depth": {
              "type": "integer",
              "title": "Shallow clone depth",
              "description": "Number of commits to include in shallow clone. 0 or omitted means full clone.",
              "minimum": 0,
              "default": 0
            }
          }
        }
      ]
    },
    "local_provider": {
      "allOf": [
        { "$ref": "#/definitions/base_provider" },
        {
          "type": "object",
          "required": ["path"],
          "additionalProperties": false,
          "properties": {
            "name": true,
            "type": true,
            "replace_default": true,
            "service": true,
            "path": {
              "type": "string",
              "title": "Local directory path",
              "description": "For trash-guides/config-templates: directory containing metadata.json. For custom-formats: flat directory of CF JSON files."
            }
          }
        }
      ]
    }
  }
}
