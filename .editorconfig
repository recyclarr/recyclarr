root = true

[*]
indent_style = space
indent_size = 2
max_line_length = 100
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.{xml,props,csproj}]
xml_attribute_indent = align_by_first_attribute
xml_linebreak_before_elements =
xml_max_blank_lines_between_tags = 1
xml_pi_attribute_style = do_not_touch
xml_space_before_self_closing = true
xml_space_inside_empty_tag = true
xml_wrap_lines = true
xml_wrap_tags_and_pi = true
xml_wrap_text = false

[*.{cs,ps1}]
indent_size = 4

[*.{json,json5,jsonc}]
ij_javascript_array_initializer_right_brace_on_new_line = false

[*.cs]

# Don't have an opinion about named args; allow situational usage
resharper_arguments_style_literal_highlighting = none
resharper_arguments_style_string_literal_highlighting = none
resharper_arguments_style_named_expression_highlighting = none
resharper_arguments_style_other_highlighting = none

# Resharper/Rider specific updates to make it respect rules used by CSharpier
resharper_arrange_trailing_comma_in_multiline_lists_highlighting = none
resharper_trailing_comma_in_multiline_lists = true
resharper_trailing_comma_in_singleline_lists = false

### Style Enforcement

# File-scoped namespaces (IDE0161)
csharp_style_namespace_declarations = file_scoped:warning

# Primary constructors (IDE0290)
csharp_style_prefer_primary_constructors = true:warning

# Pattern matching
dotnet_style_prefer_is_null_check_over_reference_equality_method = true:warning
csharp_style_pattern_matching_over_as_with_null_check = true:warning
csharp_style_pattern_matching_over_is_with_cast_check = true:warning
csharp_style_prefer_pattern_matching = true:warning
csharp_style_prefer_not_pattern = true:warning
csharp_style_prefer_switch_expression = true:warning

# Null-coalescing and simplification
dotnet_style_coalesce_expression = true:warning
dotnet_style_null_propagation = true:warning
dotnet_style_prefer_compound_assignment = true:warning

# Immutability
dotnet_style_readonly_field = true:warning

# Unnecessary code removal
dotnet_diagnostic.IDE0005.severity = warning
dotnet_diagnostic.IDE0059.severity = warning
dotnet_diagnostic.IDE0060.severity = warning
dotnet_code_quality_unused_parameters = all
dotnet_diagnostic.IDE0079.severity = warning
dotnet_remove_unnecessary_suppression_exclusions = none

# Simple using declarations (IDE0063)
csharp_prefer_simple_using_statement = true:warning

# Explicit access modifiers (IDE0040)
dotnet_style_require_accessibility_modifiers = for_non_interface_members:warning

# Target-typed new (IDE0090)
csharp_style_implicit_object_creation_when_type_is_apparent = true:warning

# Static members
dotnet_diagnostic.CA1822.severity = warning

# Performance
dotnet_diagnostic.CA1851.severity = warning
dotnet_diagnostic.CA1859.severity = warning
dotnet_diagnostic.CA1860.severity = warning
dotnet_diagnostic.CA1861.severity = warning

# Use collection expressions ([], [item]) and collection initializers
dotnet_diagnostic.IDE0028.severity = warning
dotnet_diagnostic.IDE0300.severity = warning
dotnet_diagnostic.IDE0301.severity = warning
dotnet_diagnostic.IDE0302.severity = warning
dotnet_diagnostic.IDE0303.severity = warning
dotnet_diagnostic.IDE0304.severity = warning
# ToList/ToArray -> collection expression hurts readability in LINQ chains
dotnet_diagnostic.IDE0305.severity = none

# Use pattern matching: extended property patterns
dotnet_diagnostic.IDE0170.severity = warning

# Remove redundant type casts
dotnet_diagnostic.IDE0004.severity = warning

### Analysis Suppression

# Validate arguments of public methods
dotnet_diagnostic.CA1062.severity = none

# Consider calling ConfigureAwait on the awaited task
dotnet_diagnostic.CA2007.severity = none

# Implement standard exception constructors
dotnet_diagnostic.CA1032.severity = none

# Normalize strings to uppercase
dotnet_diagnostic.CA1308.severity = none

# Prefer `with` for record copies even when all members are set (future-proofs against new fields)
resharper_with_expression_modifies_all_members_highlighting = none

# CA1034: C# 14 extension blocks compile to nested types, triggering this rule spuriously.
# Remove once the analyzer is updated to recognize extension blocks.
dotnet_diagnostic.CA1034.severity = none

# Allow `default` for reference types (no built-in inspection to enforce default over null)
resharper_prefer_concrete_value_over_default_highlighting = none
